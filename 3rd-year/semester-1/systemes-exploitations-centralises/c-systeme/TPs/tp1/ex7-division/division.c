#include <stdio.h>
#include <stdlib.h>


void printBin (unsigned val) {
    int i=0;
    unsigned un = 1 << sizeof(unsigned)*8-1;

    for (i=0;i<sizeof(unsigned)*8;i++) {
        if (i%4 == 0) putchar(' ');
        putchar(val & un ? '1' : '0');
        un >>= 1;
    }
    printf("\n");
}

// fonction pour vider le buffer (par rapport au scanf)
void f_buffer(void)
{
   int c;
   while ((c=getchar())!=EOF && c!='\n');
}

// modify a bit at pos p in n to b value
int modifyBit(int n, int p, int b) 
{ 
    int mask = 1 << p; 
    return (n & ~mask) | ((b << p) & mask); 
}


int division(unsigned char op1,unsigned char op2) { 
    unsigned char un=1<<sizeof(unsigned char)*8-1;
    unsigned char i;
    unsigned char tmp=0;
    unsigned res=0;
    for(i=0;i<sizeof(unsigned char)*8;i++) {
        if(un&op1){
            tmp+=1;
        }
        if(res>=0){
            res<<=1;
        }
        if(tmp>=op2){
            tmp=tmp-op2;
            res=+1;
        }
        un>>=1;
        tmp<<=1;
    }
    return (int) res;
}


int main() {
    int opa,opb,res;        //>0 et <256

    printf("op1 ? ");
    scanf("%d",&opa);
    f_buffer();
    printf("\n");
    printf("op2 ? ");
    // opd=getchar();
    scanf("%d",&opb);
    printf("\n");

    
    printBin(opa);printf("\n");printBin(opb);printf("\n");

    res = division(opa,opb);
    printf("resultat de la division de %d \t",opa); printBin(opa);
    printf("                       par %d \t",opb); printBin(opb);
    printf("                        =  %d \t",res); printBin(division(opa,opb));
    printf("\n");
    
    return EXIT_SUCCESS;
}
